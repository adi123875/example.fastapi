name: Build and Deploy Code
on: [push,pull_request]

jobs:
 job1:
  environment:
    name: testing
  env:
    DATABASE_HOSTNAME: ${{secrets.DATABASE_HOSTNAME}}
    DATABASE_PORT: 5432
    DATABASE_PASSWORD: 123456
    DATABASE_NAME: fastapi
    DATABASE_USERNAME: postgres
    SECRET_KEY: 09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7
    ALGORITHM: HS256
    ACCESS_TOKEN_EXPIRE_MINUTES: 30

  runs-on: ubuntu-latest
  steps: 
   - name: pulling git repo
     uses: actions/checkout@v2
   - name: set up pyhton
     uses: actions/setup-python@v2
     with:
        python-version: "3.11"
   - name: Update pip
     run: python -m pip install --upgrade pip
   - name: install dependencies
     run: pip install -r requirements.txt
   - name: Test with Pytest
     run: |
      pip install Pytest
      pytest

     